<div ng-include src="'src/core/datamart/nav.html'" class="row-fluid"></div>
<div ng-controller="core/datamart/categories/BrowseController" class="row-fluid">

  <div class="well">

    <!-- Catalog view -->
    <div ng-hide="currentCategory !== null">

      <!-- Search form -->
      <div style="padding-bottom:20px">
        <form class="form-inline" role="form">

          <div class="form-group">
            <select class="form-control" ng-model="market" ng-options="m.market for m in definedMarkets">
              <option value="">All</option>
            </select>
          </div>

          <div class="form-group">
            <select class="form-control" ng-model="language" ng-options="lang for lang in market.languages">
              <option value="">All</option>
            </select>
          </div>

        </form>
      </div>

      <div class="current-category bottom-spaced">
          <span class="glyphicon glyphicon-th"></span> Catalog
      </div>

    </div>
      
    <!-- Single category view -->
    <div class="clearfix bottom-spaced" ng-hide="currentCategory == null">

      <!-- Current category -->
      <div class="current-category pull-left">
        {{ currentCategory.name }}&nbsp;<span class="badge">{{ currentCategory.market }}</span> <span class="badge">{{ currentCategory.language }}</span>
      </div>
      
      <!-- Parent-categories  -->
      <div class="parent-category-list pull-left">
        Parents:
        <a href="{{ baseUrl + element.id }}" ng-repeat="element in parents" class="parent-category">{{ element.name }}</a>
      </div>

    </div>

    <!-- Sub-categories -->
    <div mics-datamart-grid template="'src/core/datamart/categories/category-grid.template.html'" element-template="'src/core/datamart/categories/category-grid-element.template.html'" data="categories" refresh="refreshCategories" url-prefix="baseUrl" page-size="categoriesPerPage" ng-show="categories.length > 0"></div>
  </div>

  <div mics-datamart-grid element-template="'src/core/datamart/items/item-grid-element.template.html'" data="datasheets" refresh="refreshDatasheets" url-prefix="itemUrl"></div>

</div>
